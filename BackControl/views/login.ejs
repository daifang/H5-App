<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/stylesheets/login.css">
    <link rel='icon' href="/images/Logo-大.png">
    <title>后台登录</title>
</head>
<body>
    <div id = 'container'>
        <div class="header">
            <div class="title"><span>ACG后台管理系统</span></div>
        </div>
        <div class="body">
            <div>
                <img src="/images/ship.png" alt="船" id="ship" >
                <img src="/images/bg2.jpg" alt="背景" id="bg_img">
            </div>
            <div id = 'login'>
                 <form action="/" method="POST">
                    <ul>
                        <li><input type="text" placeholder="用户名" name='username' class='user' required='required' autocomplete="name"></li>
                        <li><input type="password" placeholder="密码" name='password' class='pwd' required='required' autocomplete="on"/></li>
                        <li><input type="submit" value="登录" id='btn'/></li>
                        <li><input type="button" value="注册" id="btn1"></li>
                    </ul>
                </form>
            </div>
            <div id="login_on">
                <form action="/" method="POST">
                    <ul>
                        <li><input type="email" name='email' class="email" placeholder="邮箱" required='required' autocomplete="email"></li>
                        <li><input type="text" name='username' class="user" placeholder="用户名" required='required' autocomplete="on"></li>
                        <li><input type="password" name="pwd" class="pwd" placeholder="密码" required='required' autocomplete="on"></li>
                        <li><input type="password" name="pwd" class="pwd" placeholder="确认密码" required='required' autocomplete="on"></li>
                        <li><input type="submit" value="确认注册" id="btn2"></li>
                        <li><input type="button" value="已有账号" id="btn3"></li>
                    </ul>
                </form>
            </div>
        </div>
        <!-- <div class="footer">
        </div> -->
    </div>
</body>
<script>
    //注册显示
    ((w,d)=>{
        w.onload = ()=>{
            let btn1 = d.getElementById('btn1');
            let btn = d.getElementById('btn');
            let login = d.getElementById('login');           
            let login_in = d.getElementById('login_on');
            btn1.onclick = ()=>{
                login.style.display = 'none';
                login_in.style.display = 'block';
            }
            let btn3 = d.getElementById('btn3');
            btn3.onclick = ()=>{
                login.style.display = 'block';
                login_in.style.display = 'none';
            }
            btn.onclick = ()=>{
                if(d.cookie.loginStatus){
                    let login = d.cookie.split('=')[1];
                    console.log(login === false);
                    if(login === 'false'){
                        d.getElementById('username').oninput = ()=>{
                            setCustomValidity('');
                        }
                        d.getElementById('username').oninvalid = ()=>{
                            setCustomValidity('用户名或密码错误');
                        };
                    }else if(login === 'true'){
                        w.location.href = '/pages?page=main';
                    }
                }
            }
        }
    })(window,document)
</script>
<script>
    
</script>
</html>